@model IEnumerable<FamilyMemories.Models.ViewModels.Admin.UserRolesListViewModel>

@{
 ViewData["Title"] = "使用者管理";
 Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<div class="admin-card">
 <div class="d-flex justify-content-between align-items-center mb-3">
 <h3>使用者管理</h3>
 <a asp-action="CreateUser" class="btn btn-primary">新增使用者</a>
 </div>

 <div class="table-responsive">
 <table class="table table-hover table-striped">
 <thead class="table-dark">
 <tr>
 <th>帳號</th>
 <th>Email</th>
 <th>角色</th>
 <th>狀態</th>
 <th></th>
 </tr>
 </thead>
 <tbody>
 @foreach (var u in Model)
 {
 <tr>
 <td>@u.UserName</td>
 <td>@u.Email</td>
 <td>@string.Join(", ", u.Roles)</td>
 <td>
 @if (u.IsActive)
 {
 <span class="badge bg-success">啟用</span>
 }
 else
 {
 <span class="badge bg-secondary">停用</span>
 }
 </td>
 <td class="text-end">
 <a asp-action="EditUserRoles" asp-route-id="@u.UserId" class="btn btn-sm btn-outline-secondary">編輯角色</a>
 <form asp-action="ToggleUserStatus" asp-route-id="@u.UserId" method="post" class="d-inline">
 @if (u.IsActive)
 {
 <button type="submit" class="btn btn-sm btn-outline-warning" onclick="return confirm('確定要停用此使用者嗎？')">停用</button>
 }
 else
 {
 <button type="submit" class="btn btn-sm btn-outline-success" onclick="return confirm('確定要啟用此使用者嗎？')">啟用</button>
 }
 </form>
 </td>
 </tr>
 }
 </tbody>
 </table>
 </div>
</div>